<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             687eace567115             |
    |_______________________________________|
*/
 namespace Pmpr\Module\NotificationSystem\REST; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Common\Foundation\REST\RESTController; use Pmpr\Module\NotificationSystem\Model\Notification; use Pmpr\Module\NotificationSystem\Model\UserNotification; use WP_Error; use WP_HTTP_Response; use WP_REST_Request; use WP_REST_Response; class Controller extends RESTController { public function __construct() { $this->rest_base = 'system-notification'; parent::__construct(); } public function register_routes() { $this->register('/read-all', [Constants::oaggieeykyaoiiyw => self::qucyckeykeuuaquw, Constants::wwgusigoaksqmwsm => [$this, 'eaocuiwsaaguouyc']]); $this->register('/get-list', [Constants::wwgusigoaksqmwsm => [$this, 'ciugwooasaqcywas']]); } public function ciugwooasaqcywas(WP_REST_Request $aqmwamyiwgeeymqa) { $ycoeoaakqyskgykq = $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); $suaemuyiacqyugsm = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::imywcsggckkcywgk); $wwqemmusgqqqwskq = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, 'last_id', 0); $cussukyecoaeayqk = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, 'important', false); $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); if (empty($suaemuyiacqyugsm)) { $jwsqucqyaoaasykk = UserNotification::symcgieuakksimmu(); $gqgemcmoicmgaqie = [$eqwoegegiamegqsm->megqywqeuquawkim(Constants::yauicucwkgqyygas, $ycoeoaakqyskgykq), $eqwoegegiamegqsm->megqywqeuquawkim(Constants::gouqcwikiiygyasc, $wwqemmusgqqqwskq)->maqiysyuqmwcqoig('>')]; if ($cussukyecoaeayqk) { $gqgemcmoicmgaqie[] = $eqwoegegiamegqsm->megqywqeuquawkim(Notification::saiuyamiswmsewqa, 1); } $gaugacacwkwsggqu = $jwsqucqyaoaasykk->iekyeyicoyyawomk()->cieaqygkucwoqwke($gqgemcmoicmgaqie); if ($gaugacacwkwsggqu) { $nsmgceoqaqogqmuw = []; foreach ($gaugacacwkwsggqu as $iauqwemmwkwkemqi) { $nsmgceoqaqogqmuw[$jwsqucqyaoaasykk->mwyqswsaeeewsosm($iauqwemmwkwkemqi)] = $this->iuygowkemiiwqmiw('notification/notification', [Constants::wqyyquqcmoegoyao => $jwsqucqyaoaasykk->wysccqgwqaskiymw($iauqwemmwkwkemqi)]); } $keccaugmemegoimu = $this->qasywwyamoesisyi('ok', $nsmgceoqaqogqmuw); } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('There is no new notification yet.', PR__MDL__NOTIFICATION_SYSTEM), 404); } } else { $gqgemcmoicmgaqie = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::gouqcwikiiygyasc, $wwqemmusgqqqwskq)->maqiysyuqmwcqoig('>')); $ymiyawysimukkoso = Notification::symcgieuakksimmu()->yqgiioyiwomwoaaw($ycoeoaakqyskgykq, $suaemuyiacqyugsm, $cussukyecoaeayqk, $gqgemcmoicmgaqie); $keccaugmemegoimu = $this->qasywwyamoesisyi('ok', $ymiyawysimukkoso); } return $this->ewmkmmsuiuwmmwoy($keccaugmemegoimu); } public function eaocuiwsaaguouyc(WP_REST_Request $aqmwamyiwgeeymqa) { $ycoeoaakqyskgykq = $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); $jwsqucqyaoaasykk = UserNotification::symcgieuakksimmu(); $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $gqgemcmoicmgaqie = [$eqwoegegiamegqsm->megqywqeuquawkim($jwsqucqyaoaasykk::qaoigoeaakkkgwge, 0), $eqwoegegiamegqsm->megqywqeuquawkim(Constants::yauicucwkgqyygas, $ycoeoaakqyskgykq)]; if ($jwsqucqyaoaasykk->iekyeyicoyyawomk()->exists($gqgemcmoicmgaqie)) { $jwsqucqyaoaasykk->gssiscqyqsacmeca()->oisyoywgmmaawqmy([$jwsqucqyaoaasykk::qaoigoeaakkkgwge => 1], $gqgemcmoicmgaqie); $keccaugmemegoimu = $this->qasywwyamoesisyi(__('All notifications changes to read.', PR__MDL__NOTIFICATION_SYSTEM)); } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Can not found any unread notification for you.', PR__MDL__NOTIFICATION_SYSTEM), 404); } return $this->ewmkmmsuiuwmmwoy($keccaugmemegoimu); } public function ackuaigiocsgyqwe(WP_REST_Request $aqmwamyiwgeeymqa) : bool { return $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->ksgkoukcicwkkaum(); } }
